# <span>宇多田ヒカル大好き専用</span><span>「ウタダヒカループ」を作ってみた</span>

[冷蔵庫で設計](/2011/08/07/reizouko-driven-development)したWebサービス、宇多田ヒカル大好き専用「[ウタダヒカループ](http://uhloop.com)」を8月8日にリリースしました。

[![UTADAHIKALOOP](/images/2011/08/11/uhloop-01.png)](http://uhloop.com/)

<!-- READMORE -->


## すぐに、ずっと、ぼんじゅーる。

今回のWebサービスの制作理由をざっくりまとめると以下の2点です。

- ブラウザに [uhloop.com](http://uhloop.com/) とだけ打ち込めば、*すぐに、ずっと、宇多田ヒカルを聴いていられる・観ていられるサービス*が欲しかった。
- 活動休止ライブのDVD「WILD LIFE」で、宇多田さんがとても楽しそうに**観客と[ぼんじゅーる!!](http://twitter.com/utadahikaru/status/6550348177080320)を言い合っているシーン**を観ていたら、自分もぼんじゅーるしたくなった。

キャッチコピー「すぐに、ずっと、ぼんじゅーる。」はこんな意図で付けました。

<ins datetime="2011-08-11T22:35:00+09:00">もう1つ大事なことを書き忘れていました。このウタダヒカループで再生されるPVは、**閲覧者全員が同じ曲目・同じ再生時間で視聴**できます。ですので、みんなで同じ曲を聴きながら、ぼんじゅーるメッセージやTwitterを介して、*ちょっとだけライブ感覚で楽しむ*ことができます。</ins>


## 権利関係は大丈夫？

今回のWebサービスを公開後に散見された心配してくれるコメントには「権利関係は大丈夫？」や「非公式だからすぐ消えそう」などがありました。
確かに若干グレーな印象を与えかねないWebサービスですが、制作者としては以下の3つの理由により、**その点についてはクリアできていると判断して制作**しました。

1. [宇多田ヒカル公式のYouTubeチャンネル](http://www.youtube.com/user/hikki)で無料公開されているPV27曲だけを使用している
2. [YouTubeが公式に提供しているFlash用API](http://code.google.com/intl/ja/apis/youtube/flash_api_reference.html)を経由して上記のPVを読み込んでいる
3. 宇多田ヒカル公式チャンネルのPVは、上記API経由での読み込みを許可してくれている[^1]

ただし、[はてブのコメント欄](https://b.hatena.ne.jp/entry/s/uhloop.com/)でも書かれていましたが、こういうのは権利者やAPI提供者がアウトと言えばそれで終了するタイプのものですので、そういう可能性もあり得ると覚悟した上で作りましたｗ 権利者やAPI提供者から警告が出たら潔く終了するつもりですが、そうならないことを祈るばかりです。


## Node.js、Flash、Socket.io

今回のWebサービスは、新しい技術(Node.jsやSocket.io)と古い技術(Flash)を組み合わせてみたのが、ちょっと珍しいかなと自分では思っています。


### Node.js

Node.jsについて色々調べていく中で、Flashとの相性の良さそうだと思えたのは、以下の記事を読んだ時でした。Node.jsの特性を理解する上でとても素晴らしい記事です。

<cite>[Node におけるスケールアーキテクチャ考察(SSP 編) - Block Rockin’ Codes](http://d.hatena.ne.jp/Jxck/20110606/1307333415)</cite>

Node.jsを運用する上で、いかにサーバーサイドのCPUに負荷を与えないか、フロントエンド側でいかにして多くの処理を行うか、の重要性について書かれていました。
そして、それを読んだ自分は、Node.jsの特性とその対となるフロントエンドの技術として、Flashは結構適していると思いました。


### Flash

今回のWebサービスは、フロントエンド側で必要になるすべての要素（処理）を、*最初のアクセス時のリクエストだけで済む1つのSWFファイル（176KB）内に全部閉じ込めて*、その後に発生するNode.jsサーバーへのリクエストは、リアルタイム通信部分（ぼんじゅーるメッセージの送受信）のみに絞り込めました。逆に言えば、そのリアルタイム通信部分以外では、まったくNode.jsサーバーにリクエストを送っておらず、ローカルで独立しています。それが今回のWebサービスの、そしてFlashという技術を使った一番の長所ではないかなと思っています。


### Socket.io

リアルタイム通信で使用しているSocket.ioについては、以下の記事が参考になりました。

<cite>[ExpressとSocket.ioを使ったチャットサンプル - 自分の感受性くらい](http://d.hatena.ne.jp/t_43z/20101020/1287546063)</cite>
<cite>[node.jsでchatアプリっぽいもの作るメモ - すぎゃーんメモ](http://d.hatena.ne.jp/sugyan/20101227/1293455185)</cite>
<cite>[Socket.IO v0.7 のロードマップと新機能 - Block Rockin’ Codes](http://d.hatena.ne.jp/Jxck/20110530/1306792028)</cite>
<cite>[50行くらいで作るnode.js + socket.io(0.7x)のサンプル - 大人になったら肺呼吸](http://d.hatena.ne.jp/replication/20110623/1303875126)</cite>

上2つは情報としては若干古いですが、Socket.ioの構造や作法を理解する上でとても役立ちました。下2つの記事は最新に近いバージョンのSocket.ioを対象に書かれていますので、実際に動かす場合はこちらを見ると良いかもです。

今回ウタダヒカループで使用したSocket.io部分は、複雑なことはしておらず、上記に載っている情報だけで完結しています。Socket.ioというライブラリ自体が多くのことをカバーしてくれるので、初心者でも比較的簡単に扱えるようになっていました。

<ins datetime='2013-07-04T22:35:00+09:00'>2013年7月現在では、バックエンドはRailsとPusherに変わっています。</ins>


## ベータ版ではGoogle+を活用

7月中旬頃にはプライベートベータ版として何人かの方にウタダヒカループを使っていただいて、その感想をいただき、サービスの更なるブラッシュアップに繋げるという工程を行いました。今回はそのコミュニケーション手段として[Google+](https://plus.google.com/)を活用してみました。

[前回のSASSIENCE](/2011/05/26/css-indent-nest-beauty-service-sassience)ではTwitterのダイレクトメッセージを使って、140文字程度で聞けるホントに聞きたいポイント1～2点だけをフィードバックとしていただいたんですが、今回はGoogle+を使ったことで文字数制限を気にすること無く質問することができました。

質問する際には、できるだけ相手に手間が掛からぬよう、あらかじめ[感想を聞きたいポイントをリストアップ](https://gist.github.com/1135918)し、アンケート形式でお答えいただきました。さらには、Google+の限定公開機能を利用して専用のスレッドを作り、アンケートにお答えいただいた方々に、その後のウタダヒカループのバージョンアップ内容や自分がサービスについてどう考えているか、はたまた技術的なことで自分が調べたことをシェアするために、そこで情報共有しました。こういった使い方をする場合のGoogle+はとても便利でした。

今回そのベータ版でのフィードバックにご協力いただいたのは、<a href="http://twitter.com/#!/func09">@func09</a>さん、<a href="http://twitter.com/#!/7kamura">@7kamura</a>さん、<a href="http://twitter.com/#!/june29">@june29</a>さん、<a href="http://twitter.com/#!/komagata">@komagata</a>さん、<a href="http://twitter.com/#!/machida">@machida</a>さん、<a href="http://twitter.com/#!/heavenshell">@heavenshell</a>さん、<a href="http://twitter.com/#!/junya">@junya</a>さん、<a href="http://twitter.com/#!/mochiz">@mochiz</a>さん、<a href="http://twitter.com/#!/monoooki">@monoooki</a>さん、<a href="http://twitter.com/#!/deeeki">@deeeki</a>さん、<a href="http://twitter.com/#!/marutanm">@marutanm</a>さん、<a href="http://twitter.com/#!/satococoa">@satococoa</a>さん、<a href="http://twitter.com/#!/rono23">@rono23</a>さん、<a href="http://twitter.com/#!/yoshuki">@yoshuki</a>さん、<a href="http://twitter.com/#!/d_akatsuka">@d_akatsuka</a>さんの15名です。

みなさんサービスやアプリを作る人・ブログ等で情報発信している人ばかりで、今回僕がお願いした感想やアンケートについてもすぐに意図をご理解いただけて、お忙しい中ご協力いただきました。この場を借りてお礼申し上げます。ありがとうございました！


## アワード、転職、執筆

ここからは個人的な話になるので、Webサービスの話からはちょっと逸れます。


### アワード

今回のウタダヒカループは、[Yahoo! JAPAN インターネット クリエイティブアワード](http://creative-award.yahoo.co.jp/)に応募してみました。前述の権利関係の話もあり、審査の時期には既に消滅しているかもしれない危ういWebサービスですが…、可能性がちょっとでもあるなら、と送信ボタンを押してみました。また、1人が応募できる作品数に制限は無いようだったので、過去に作ったものもついでに送信しておきました。

ちょうど昨日お会いしてお話しした<a href="http://twitter.com/#!/func09">@func09</a>さんの書かれた記事に以下の一節があります。僕はこれを真似ようと思いました。

> この時期は、ネット上で見つけたアワードに出すという目標を掲げることで、短い期間で一気に作る。という事をしていました。
>
> <cite>[自分でWebサービスを作ってたら起業することになりました - func09](http://www.func09.com/wordpress/archives/1151)</cite>


### 転職

少し前から転職活動を始めました。現在在籍しているWeb系制作会社にもその意思は報告済みで、9月上旬頃に退職する予定です。

フリーランスとして活動するか、スタートアップに参加するか、会社に正社員として所属するか、などもまだしっかりとは決めてない状態で、模索中・調査中です。できるだけ多くの働き方を見て、多くの選択肢の中から検討したい気持ちがあり、もし僕のブログや制作したものに興味を持っていただけて、そういった話があるという方がいらっしゃったら声を掛けていただけると嬉しいです。[ポートフォリオサイト](https://ruedap.com)にメールアドレスを載せています。僕ができること・やりたいことは、このブログに書かれていることと[過去に作ったもの](https://ruedap.com)を見てもらうのが確実だと思います。


### 執筆

個人的な願望なのですが、本や雑誌で執筆してみたいと昔から思っていて、うまいかヘタかは別として、文章を書くことは好きです。過去のブログ記事の中で、*一番気合いを入れて書いた文章*は、以下の10回シリーズのHeroku入門記事です。

<cite>[HerokuでWebアプリ開発を始めるなら知っておきたい10のこと](/2011/05/09/ruby-heroku-web-app-development-tips-matome)</cite>

こちらについても、もしそういった機会を与えてもらえるなら喜んで受けたいので、ご連絡いただけると嬉しいです。


## 2年後、5年後、そしてずっと


2010年8月9日、宇多田ヒカルは[アーティスト活動の休止を自身のブログで発表](http://www.emimusic.jp/app/scripts/emilog.php?id=from_hikki&no=1237)しました。

> 2年になるか、5年になるか、わからないけど、一回り大きくなって帰ってくるから。少し時間をください。
>
> <cite>[久しぶりの大事なお知らせ - Hikki's WEBSITE](http://www.emimusic.jp/app/scripts/emilog.php?id=from_hikki&no=1237)</cite>

2011年8月8日、活動休止発表から1年が経過した日に、僕は個人として、1ファンとして、非公式なサービスとして、単に自分が欲しかったという理由で制作し、ウタダヒカループをリリースしました。

2年後、5年後、もしまだ宇多田ヒカルがアーティスト活動を再開してなかった時に、昔ウタダヒカループなんてサイトがあったなぁと思い出してくれて、ブラウザーに[uhloop.com](http://uhloop.com/)と打ち込んで、彼女の作品を観ながら・聴きながら何気なく「ぼんじゅーる!!」と押した時、画面の向こうのどこかの誰かが、もし「ぼんじゅーる!!」と返してくれたら、それってむちゃくちゃ最高じゃないですか。

確率は相当低いかもしれないけど、この[サービス](http://uhloop.com/)がそういう瞬間を生み出してくれることを願っています。

[^1]: 動画の権利者はYouTubeの設定でAPI経由の読み込みを不許可にすることも可能
